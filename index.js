!function(t){function e(e){for(var r,i,c=e[0],u=e[1],l=e[2],p=0,f=[];p<c.length;p++)i=c[p],o[i]&&f.push(o[i][0]),o[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);for(s&&s(e);f.length;)f.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,c=1;c<n.length;c++){var u=n[c];0!==o[u]&&(r=!1)}r&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},o={0:0},a=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var s=u;a.push([1,1]),n()}({1:function(t,e,n){t.exports=n(7)},7:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),a=(n(2),function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}),i=0;var c=function(){function t(t,e){var n,r,c=(n={mappings:e.mappings},r="CustomMode-"+ ++i,o.a.defineMode(r,function(){function t(t,e){var r,o;e.line=t.lineOracle.line;try{for(var i=a(n.mappings),c=i.next();!c.done;c=i.next()){var u=c.value;if(t.match(u.matchRegexp,!1)){var l=u.consumeRegexp||u.matchRegexp;return t.match(l),e.mapping=u,u.type}}}catch(t){r={error:t}}finally{try{c&&!c.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return t.next(),null}return{startState:function(){return{tokenize:t,context:null}},token:function(e,n){return n.tokenize===t&&e.eatSpace()?(n.mapping=void 0,null):n.tokenize(e,n)}}}),r);this.instance=o()(t,{value:e.value,mode:c}),this.listenContentChange()}return t.prototype.listenContentChange=function(){var t=this;this.instance.on("change",function(){t.replaceVariables()})},t.prototype.replaceVariables=function(){var t=this,e=this.instance.getDoc();e.getAllMarks().forEach(function(t){t.clear()}),e.eachLine(function(n){t.instance.getLineTokens(n.lineNo()).forEach(function(t){if(t&&t.type&&t.state&&t.state.mapping){var n=t.state.line,r={line:n,ch:t.start},o={line:n,ch:t.end},a=t.state.mapping,i=a&&a.hasOwnProperty("text")?"string"==typeof a.text?a.text:a.text(t.string):t.string,c=a&&a.hasOwnProperty("className")?a.className:"cm-variable",l=a&&a.tooltip?"string"==typeof a.tooltip?a.tooltip:a.tooltip(t.string):void 0;e.markText(r,o,{replacedWith:u(i,c,l)})}})})},t.prototype.getValue=function(){return this.instance.getDoc().getValue()},t.prototype.setValue=function(t){this.instance.getDoc().setValue(t)},t.prototype.onChange=function(t){var e=this;this.instance.on("change",function(){t(e.getValue())})},t}();function u(t,e,n){var r=document.createElement("span");return r.innerHTML=t,e&&r.classList.add(e),n&&r.setAttribute("data-editor-tooltip",n),r}var l,s=document.getElementById("editor"),p=new c(s,{value:"",mappings:[{type:"variable",matchRegexp:/^nickname/,text:"昵称",className:"cm-keyword",tooltip:"我叫王大锤"},{type:"variable",matchRegexp:/^#(\w|\d)+#/,className:"cm-keyword",text:function(t){var e;return(e={},e["#date#"]="获奖时间",e["#phoneNo#"]="手机号码",e["#Email#"]="电子邮箱",e)[t]||"Unknown Variable"},tooltip:function(t){var e;return(e={},e["#date#"]="获奖时间："+new Date,e["#phoneNo#"]="手机号码：182xxxx1010",e["#Email#"]="电子邮箱：junfeng.li@shuyun.com",e)[t]||"不识别的变量"}}]});p.instance.focus(),p.instance.on("blur",function(){l=p.instance.getDoc().getCursor()}),document.querySelectorAll(".btn-variable").forEach(function(t){t.addEventListener("click",function(){var e=t.getAttribute("data-variable");l&&(p.instance.getDoc().replaceRange(e,l,l),l.ch+=e.length+1,p.instance.focus())})}),s.addEventListener("mouseover",function(t){var e=t.target.getAttribute("data-editor-tooltip");e&&console.log(e)})}});