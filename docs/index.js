!function(e){function t(t){for(var r,i,c=t[0],l=t[1],u=t[2],p=0,f=[];p<c.length;p++)i=c[p],o[i]&&f.push(o[i][0]),o[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(s&&s(t);f.length;)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var l=n[c];0!==o[l]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={0:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var s=l;a.push([1,1]),n()}({1:function(e,t,n){e.exports=n(7)},7:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=(n(2),function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}),i=0;var c=function(){function e(e,t){var n,r,c=(n={placeholders:t.placeholders},r="CustomMode-"+ ++i,o.a.defineMode(r,function(){function e(e,t){var r,o;t.line=e.lineOracle.line;try{for(var i=a(n.placeholders),c=i.next();!c.done;c=i.next()){var l=c.value;if(e.match(l.matchRegexp,!1)){var u=l.consumeRegexp||l.matchRegexp;return e.match(u),t.placeholder=l,l.type}}}catch(e){r={error:e}}finally{try{c&&!c.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return e.next(),null}return{startState:function(){return{tokenize:e,context:null}},token:function(t,n){return n.tokenize===e&&t.eatSpace()?(n.placeholder=void 0,null):n.tokenize(t,n)}}}),r);this.instance=o()(e,{value:t.value,mode:c}),this.listenContentChange()}return e.prototype.listenContentChange=function(){var e=this;this.instance.on("change",function(){e.replaceVariables()})},e.prototype.replaceVariables=function(){var e=this.instance.getDoc();e.getAllMarks().forEach(function(e){e.clear()}),this.getTokens().forEach(function(t){if(t&&t.type&&t.state&&t.state.placeholder){var n=t.state.line,r={line:n,ch:t.start},o={line:n,ch:t.end},a=t.state.placeholder,i=a&&a.hasOwnProperty("text")?"string"==typeof a.text?a.text:a.text(t.string):t.string,c=a&&a.hasOwnProperty("className")?a.className:"cm-variable",u=a&&a.tooltip?"string"==typeof a.tooltip?a.tooltip:a.tooltip(t.string):void 0;e.markText(r,o,{replacedWith:l(i,c,u)})}})},e.prototype.getTokens=function(){var e=this,t=[];return this.instance.getDoc().eachLine(function(n){e.instance.getLineTokens(n.lineNo()).forEach(function(e){return t.push(e)})}),t},e.prototype.getValue=function(){return this.instance.getDoc().getValue()},e.prototype.setValue=function(e){this.instance.getDoc().setValue(e)},e.prototype.onChange=function(e){var t=this;this.instance.on("change",function(){e(t.getValue())})},e}();function l(e,t,n){var r=document.createElement("span");return r.innerHTML=e,t&&r.classList.add(t),n&&r.setAttribute("data-editor-tooltip",n),r}var u,s=document.getElementById("editor"),p=new c(s,{value:"",placeholders:[{type:"variable",matchRegexp:/^nickname/,text:"昵称",className:"cm-keyword",tooltip:"我叫王大锤"},{type:"variable",matchRegexp:/^#(\w|\d)+#/,className:"cm-keyword",text:function(e){var t;return(t={},t["#date#"]="获奖时间",t["#phoneNo#"]="手机号码",t["#Email#"]="电子邮箱",t)[e]||"Unknown Variable"},tooltip:function(e){var t;return(t={},t["#date#"]="获奖时间："+new Date,t["#phoneNo#"]="手机号码：182xxxx1010",t["#Email#"]="电子邮箱：junfeng.li@shuyun.com",t)[e]||"不识别的变量"}}]});p.instance.focus(),p.instance.on("blur",function(){u=p.instance.getDoc().getCursor()}),document.querySelectorAll(".btn-variable").forEach(function(e){e.addEventListener("click",function(){var t=e.getAttribute("data-variable");u&&(p.instance.getDoc().replaceRange(t,u,u),u.ch+=t.length+1,p.instance.focus())})}),s.addEventListener("mouseover",function(e){var t=e.target.getAttribute("data-editor-tooltip");t&&console.log(t)})}});